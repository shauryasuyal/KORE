<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kore AI - System Fix Demo</title>
    <style>
        /* --- WINDOWS 11 AESTHETICS --- */
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2564&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            user-select: none;
        }

        /* --- TASKBAR --- */
        .taskbar {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 48px;
            background: rgba(243, 243, 243, 0.85);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: center;
            align-items: center;
            border-top: 1px solid rgba(255, 255, 255, 0.4);
            z-index: 1000;
        }
        .taskbar-icon {
            width: 30px;
            height: 30px;
            margin: 0 10px;
            border-radius: 4px;
            transition: 0.2s;
            cursor: pointer;
        }
        .taskbar-icon:hover { background: rgba(0,0,0,0.1); }
        
        /* --- GENERIC WINDOW STYLE --- */
        .window {
            position: absolute;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none; /* Hidden by default */
            flex-direction: column;
            overflow: hidden;
            border: 1px solid #ccc;
            animation: popIn 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        }

        @keyframes popIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .title-bar {
            height: 30px;
            background: #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
            font-size: 12px;
        }
        .controls span {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 5px;
        }
        .close { background: #ff5f57; }
        .min { background: #ffbd2e; }
        .max { background: #28c940; }

        /* --- ERROR POPUP --- */
        #error-popup {
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 180px;
            z-index: 2000;
        }
        .error-content {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .error-icon {
            font-size: 40px;
            color: #d9534f;
        }
        .error-btn {
            position: absolute;
            bottom: 15px;
            right: 20px;
            padding: 5px 20px;
            background: #e1e1e1;
            border: 1px solid #aaa;
            cursor: pointer;
        }

        /* --- KORE CHAT WINDOW --- */
        #kore-chat {
            top: 15%;
            right: 5%;
            width: 350px;
            height: 500px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1500;
        }
        .chat-area {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            font-size: 14px;
        }
        .msg {
            padding: 8px 12px;
            border-radius: 12px;
            max-width: 80%;
            animation: slideUp 0.3s ease;
        }
        @keyframes slideUp { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .bot { background: #eef; color: #333; align-self: flex-start; border-bottom-left-radius: 2px; }
        .user { background: #0078d4; color: #fff; align-self: flex-end; border-bottom-right-radius: 2px; }
        
        .input-area {
            height: 50px;
            border-top: 1px solid #ddd;
            display: flex;
            padding: 5px;
        }
        input {
            flex: 1;
            border: none;
            padding: 10px;
            outline: none;
            background: transparent;
        }
        button {
            padding: 0 15px;
            background: #0078d4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        /* --- FAKE FILE EXPLORER --- */
        #file-explorer {
            top: 20%;
            left: 20%;
            width: 600px;
            height: 400px;
            z-index: 1000;
        }
        .explorer-header {
            padding: 10px;
            background: #fff;
            border-bottom: 1px solid #eee;
            font-size: 13px;
            color: #555;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .address-bar {
            flex: 1;
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        .file-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
        }
        .file {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            font-size: 12px;
            color: #333;
        }
        .file img { width: 48px; height: 48px; margin-bottom: 5px; }
        
        /* The Magic File */
        #magic-file {
            display: none; /* Invisible initially */
            animation: popIn 0.5s ease;
        }

        /* --- LOADER --- */
        .typing-indicator { font-style: italic; color: #888; font-size: 12px; margin-left: 10px; display: none; }
        
    </style>
</head>
<body>

    <div id="error-popup" class="window">
        <div class="title-bar">
            <span>System Error</span>
            <div class="controls"><span class="close"></span></div>
        </div>
        <div class="error-content">
            <div class="error-icon">❌</div>
            <div>
                <strong>System Error</strong><br>
                The code execution cannot proceed because <span style="color:red">msvcp140.dll</span> was not found.<br><br>
                Reinstalling the program may fix this problem.
            </div>
        </div>
        <button class="error-btn" onclick="closeError()">OK</button>
    </div>

    <div id="kore-chat" class="window" style="display: flex;">
        <div class="title-bar" style="background: #0078d4; color: white;">
            <span>Kore Assistant</span>
            <div class="controls"><span class="close" style="background:rgba(255,255,255,0.3)"></span></div>
        </div>
        <div class="chat-area" id="chat-display">
            <div class="msg bot">Kore System Online. Monitoring system health...</div>
        </div>
        <div class="typing-indicator" id="typing">Kore is researching...</div>
        <div class="input-area">
            <input type="text" id="user-input" placeholder="Type a message..." onkeypress="handleEnter(event)">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <div id="file-explorer" class="window">
        <div class="title-bar">
            <span>File Explorer</span>
            <div class="controls"><span class="close"></span><span class="min"></span><span class="max"></span></div>
        </div>
        <div class="explorer-header">
            <span>⬆</span>
            <div class="address-bar">C:\Windows\System32</div>
            <input type="text" placeholder="Search System32" style="width: 150px; background:#fff; border:1px solid #ccc; border-radius:4px;">
        </div>
        <div class="file-grid" id="file-grid">
            <div class="file"><img src="https://img.icons8.com/color/48/dll.png"><span>kernel32.dll</span></div>
            <div class="file"><img src="https://img.icons8.com/color/48/dll.png"><span>user32.dll</span></div>
            <div class="file"><img src="https://img.icons8.com/color/48/folder-invoices.png"><span>drivers</span></div>
            <div class="file"><img src="https://img.icons8.com/color/48/console.png"><span>cmd.exe</span></div>
            
            <div class="file" id="magic-file" style="border: 2px dashed #28c940; padding: 5px; border-radius: 8px;">
                <img src="https://img.icons8.com/color/48/checked-2.png">
                <span style="color:#28c940; font-weight:bold;">msvcp140.dll</span>
            </div>
        </div>
    </div>

    <div class="taskbar">
        <img src="https://img.icons8.com/color/48/windows-logo.png" class="taskbar-icon" title="Start">
        <img src="https://img.icons8.com/color/48/search--v1.png" class="taskbar-icon">
        <img src="https://img.icons8.com/fluency/48/folder-invoices.png" class="taskbar-icon" onclick="openExplorer()">
        <img src="https://img.icons8.com/color/48/artificial-intelligence.png" class="taskbar-icon" onclick="toggleChat()">
    </div>

    <script>
        // --- SCENE LOGIC ---

        // 1. Trigger Error after 2 seconds
        window.onload = function() {
            setTimeout(() => {
                document.getElementById('error-popup').style.display = 'block';
                // Play error sound effect (optional/browser might block)
            }, 2000);
        };

        function closeError() {
            document.getElementById('error-popup').style.display = 'none';
        }

        function toggleChat() {
            const chat = document.getElementById('kore-chat');
            chat.style.display = chat.style.display === 'none' ? 'flex' : 'none';
        }
        
        function openExplorer() {
            document.getElementById('file-explorer').style.display = 'flex';
        }

        // --- CHAT LOGIC ---
        function handleEnter(e) {
            if (e.key === 'Enter') sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('user-input');
            const text = input.value.trim();
            if (!text) return;

            // Add User Message
            addMsg(text, 'user');
            input.value = '';

            // AI Logic Simulation
            document.getElementById('typing').style.display = 'block';

            if (text.toLowerCase().includes('dll') || text.toLowerCase().includes('fix') || text.toLowerCase().includes('error')) {
                setTimeout(() => {
                    document.getElementById('typing').innerText = "Kore is searching Google for 'msvcp140.dll missing'...";
                }, 1000);

                setTimeout(() => {
                    addMsg("I found the issue. 'msvcp140.dll' is missing from your System32 folder.", 'bot');
                    addMsg("I am downloading the correct version from the Microsoft Repository now...", 'bot');
                    document.getElementById('typing').innerText = "Downloading file...";
                    
                    // START THE MAGIC
                    startFixSequence();
                }, 3500);
            } else {
                setTimeout(() => {
                    addMsg("I am ready to help with system errors. Try asking me to fix the DLL issue.", 'bot');
                    document.getElementById('typing').style.display = 'none';
                }, 1500);
            }
        }

        function addMsg(text, sender) {
            const display = document.getElementById('chat-display');
            const div = document.createElement('div');
            div.className = `msg ${sender}`;
            div.innerText = text;
            display.appendChild(div);
            display.scrollTop = display.scrollHeight;
        }

        function startFixSequence() {
            // 1. Open Explorer automatically
            setTimeout(() => {
                document.getElementById('file-explorer').style.display = 'flex';
            }, 1000);

            // 2. Wait a bit, then show the file
            setTimeout(() => {
                const magicFile = document.getElementById('magic-file');
                magicFile.style.display = 'flex'; // SHOW IT!
                
                // Add success message
                document.getElementById('typing').style.display = 'none';
                addMsg("✅ Success! I have installed msvcp140.dll into C:\\Windows\\System32. The error is resolved.", 'bot');
            }, 3000);
        }
    </script>
</body>
</html>